## 45 | 答疑（五）：网络收发过程中，缓冲区位置在哪里？


### 笔记

sk_buff、套接字缓冲、连接跟踪等，都通过 slab 分配器来管理。你可以直接通过 /proc/slabinfo，来查看它们占用的内存大小。

### 命令


### 发现面试题

环形缓冲区、sk_buff 缓冲区、套接字缓冲区，跟前面内存部分讲到的 Buffer 和 Cache 有什么关联吗？
内存中提到的 Buffer ，都跟块设备直接相关；而其他的都是 Cache。

最大连接数是不是受限于 65535 个端口？
无论 TCP 还是 UDP，端口号都只占 16 位，也就说其最大值也只有 65535
对客户端来说，每次发起 TCP 连接请求时，都需要分配一个空闲的本地端口，去连接远端的服务器。由于这个本地端口是独占的，所以客户端最多只能发起 65535 个连接。对服务器端来说，其通常监听在固定端口上（比如 80 端口），等待客户端的连接。
如果不考虑 IP 地址分类以及资源限制，服务器端的理论最大连接数，可以达到 2 的 48 次方（IP 为 32 位，端口号为 16 位），远大于 65535。
综合来看，客户端最大支持 65535 个连接，而服务器端可支持的连接数是海量的。


### 精选留言
