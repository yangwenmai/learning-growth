## 22 | 答疑（三）：文件系统与磁盘的区别是什么？

### 笔记

系统通过三种方式回收内存：
1. 基于 LRU（Least Recently Used）算法，回收缓存；
2. 基于 Swap 机制，回收不常访问的匿名页；
3. 基于 OOM（Out of Memory）机制，杀掉占用大量内存的进程。

active 记录活跃的内存页；
inactive 记录非活跃的内存页。

磁盘是存储数据的块设备，也是文件系统的载体。

bcc-tools 在 CentOS 上安装可能会遇到不少问题。
解决步骤：
1. 升级内核
2. 安装 bcc-tools


### 命令

每个进程的 PSS ，是指把共享内存平分到各个进程后，再加上进程本身的非共享内存大小的和。
```sh
# 使用grep查找Pss指标后，再用awk计算累加值
$ grep Pss /proc/[1-9]*/smaps | awk '{total+=$2}; END {printf "%d kB\n", total }'
391266 kB
```

### 发现面试题

怎么理解 LRU 内存回收？
回收后的内存又到哪里去了？
OOM 是按照虚拟内存还是实际内存来打分？
怎么估计应用程序的最小内存？

### 专栏金句


